% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_data.R
\name{simulate_rdd_data}
\alias{simulate_rdd_data}
\title{Simulate Synthetic Data for Sharp or Fuzzy RDD Examples}
\usage{
simulate_rdd_data(
  n = 4000,
  cutoff = 16,
  dist = c("poisson", "uniform"),
  lambda = 15,
  range = c(8L, 25L),
  beta = c(0, 0.1, 0.002),
  tau = 1,
  sigma = 1,
  design = c("fuzzy", "sharp"),
  p0 = 0.2,
  p1 = 0.8,
  manip_width = 0,
  manip_prob = 0,
  seed = NULL
)
}
\arguments{
\item{n}{Integer sample size (≥ 1).}

\item{cutoff}{Numeric threshold.  Must be integer‐aligned with the support of
\code{x}.}

\item{dist}{Either "poisson" (default) or "uniform".}

\item{lambda}{Poisson mean when \code{dist = "poisson"}.}

\item{range}{Integer length‑2 support when \code{dist = "uniform"}.}

\item{beta}{Numeric length‑3 vector for the quadratic mean of \code{Y(0)}.}

\item{tau}{Constant treatment effect added to \code{Y(1)} (default \code{1}).}

\item{sigma}{Error SD for both potential outcomes (default \code{1}).}

\item{design}{"fuzzy" (default) or "sharp".}

\item{p0, p1}{Treatment probabilities below / above cutoff when
\code{design = "fuzzy"}.}

\item{manip_width}{Numeric ≥ 0 — interval width subject to manipulation just
below the cutoff.}

\item{manip_prob}{Probability of manipulation for units in that interval
(default \code{0}).}

\item{seed}{Optional integer for reproducibility.}
}
\value{
A \code{data.frame} with columns:
\itemize{
\item \code{x} – running variable \strong{after} manipulation.
\item \code{y} – realised outcome.
\item \code{z} – treatment status.
\item \code{x_orig} – running variable before manipulation.
\item \code{manipulated} – logical flag.
}

The object carries attributes:
\itemize{
\item \code{ate_cutoff} – true treatment effect at the cutoff (\code{tau}).
\item \code{call} – original function call.
}
}
\description{
A convenience generator that mirrors the data‐generating processes used in
the \strong{rdpartial} documentation and unit tests.  The function produces a
data frame ready for \code{bounds_sharp()}, \code{bounds_fuzzy()}, and
\code{bootstrap_bounds()}, while also returning the \emph{true} treatment effect at the
cutoff for quick sanity checks.
}
\section{Outline of the DGP}{

\enumerate{
\item Draw an \strong{integer} running variable \code{x} from either a Poisson or discrete
uniform distribution.
\item (Optional) Manipulate units with \code{x} in \verb{(cutoff − manip_width, cutoff)}
above the threshold with probability \code{manip_prob}.
\item Generate potential outcomes \code{Y(0)} and \code{Y(1)} as quadratic functions of
\code{x} plus Normal noise.
\item Assign treatment either \emph{sharply} (\verb{z = 1(x ≥ cutoff)}) or \emph{fuzzily} via
Bernoulli probabilities \code{p0}, \code{p1} below / above the cutoff.
\item Observe realised outcome \code{y = Y(z)}.
}
}

\examples{
set.seed(42)
sim <- simulate_rdd_data(n = 2000, cutoff = 16, design = "fuzzy",
                         manip_width = 0.4, manip_prob = 0.25)
head(sim)
attr(sim, "ate_cutoff")

}
